<html>
    <head>
    <title>Josh's Linux Tools</title>
    <script type=text/javascript>
        function deshabilitarBoton() {
            document.getElementById("envio").innerHTML ="hello";
            return true;}
        </script>
        <style>
            div1 {
                white-space: pre-wrap;
            }
            div2 {
                white-space: pre-wrap;
            }
        </style>
    </head>

    <body>
    <div2><div id="div2">{{files}}</div></div2>
    <font color="black"><br>Welcome to Josh's file reader! This page shows the results of running the cat command on any file in the folder. <br>
        Just put in the name of one of the listed files and watch it go! Just don't try to read the 'secret' file.<br></font>
        
        <form>
        <input type= "text" id="command" size="50" name="command" onkeydown="processKey()"></input>
        <input type = "button" id="run" value = "Read File" style="background: darkcyan;color:white;" width="20" onclick="runCode()" ></input>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script>
            function runCode()  {
                $.post(window.location.href, JSON.stringify({command:document.getElementById("command").value, confirming:'n'}), (data, status) => {
                    if(data[0] == '<') {
                        document.write(data);
                    }
                    else {
                        document.getElementById("div1").innerHTML = data;
                    }     
                });
                function runCode2()  {
                $.post(window.location.href, JSON.stringify({command:document.getElementById("command").value, confirming:'y'}), (data, status) => {
                    document.getElementById("div1").innerHTML = data;
                });
                }  
                function runCode3()  {
                    window.location.href = window.location.href;
                }  
            }  
            function processKey()
            {
                if(!e) var e = window.event;
                if (null == e)
                    e = window.event ;
                if (e.keyCode == 13)  {
                    event.preventDefault();
                    runCode();
                    return false;
                }
            }
        </script>
        </form>

        <div1><div id="div1"></div></div1>
</body>
</html>
